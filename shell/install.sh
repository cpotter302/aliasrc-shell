#!/bin/bash

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[0;33m'
NO_COLOR='\033[0m'
CLEAR_LINE='\r\033[K'

git clone https://github.com/cpotter302/aliasrc-shell.git ~

export ALIAS_RC_ROOT=~/.bash_aliasrc
mv "$PWD"/alias.sh /bin/aliasrc && \
mv "$HOME"/aliasrc-shell /usr/lib

echo "# autogenerated by aliasrc" >> $ALIAS_RC_ROOT &&
  echo "if [ -f ~/$ALIAS_RC_ROOT ]; then
        . ~/$ALIAS_RC_ROOT
      fi" >> ~/.bashrc &&
  source "$HOME"/.bashrc

printf "🔎   checking dependencies"

if ! command -v python3 >/dev/null  ||  ! command -v pip3 >/dev/null; then
  printf "%s💀%s  You must install python3 and pip3 on your system before setup can continue%s\n", \
  "${CLEAR_LINE}", "${RED}", "${NO_COLOR}"
  printf "ℹ️   On Ubuntu-Linux🍎 you should 'sudo apt install python'\n"
  printf "Run script again after finishing to install missing dependencies"
  exit
else
  sudo pip3 install -r ../requirements.txt
fi


printf "Succesfully installes aliasrc-shell"
printf "view man pages for further instructions"
#TODO make al *.sh files executable